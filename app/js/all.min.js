'use strict';

;(function () {
    "use strict";

    (function () {
        var burger = document.querySelector('.burger-container'),
            hamburger = document.querySelector('.hamburger'),
            titleItem = document.querySelectorAll('.titleul-item a');

        burger.addEventListener('click', function () {
            hamburger.classList.toggle('titleul-opened');
        });

        for (var i = 0; i < titleItem.length; i++) {
            titleItem[i].onclick = function () {
                hamburger.classList.toggle('titleul-opened');
            };
        }
    })();

    (function () {
        var left = document.querySelector('.slider .LeftRight .prev'),
            right = document.querySelector('.slider .LeftRight .next'),
            slide = document.querySelectorAll('.slider .block'),
            i = 0,
            time = 5000,
            www = void 0;

        left.addEventListener('click', function (event) {
            event.preventDefault();
            clearInterval(www);
            slide[i].classList.remove('active');
            i--;
            if (i < 0) {
                i = slide.length - 1;
            }

            slide[i].classList.add('active');
            www = setInterval(right.onclick, time);
        });

        right.addEventListener('click', function (event) {
            event.preventDefault();
            clearInterval(www);
            slide[i].classList.remove('active');
            i++;
            if (i >= slide.length) {
                i = 0;
            }
            slide[i].classList.add('active');
            www = setInterval(right.onclick, time);
        });
        www = setInterval(right.onclick, time);
    })();

    (function () {
        var speed = 6;
        var top = 0,
            src = void 0;
        [].forEach.call(document.querySelectorAll('.move-to'), function (item) {
            var target = document.getElementById(item.getAttribute('href').split('#')[1]);
            item.addEventListener('click', function (event) {
                event.preventDefault();
                var topvalue = Math.abs(target.offsetTop);
                console.log(top);
                console.log(topvalue);
                var y = top;
                if (top > topvalue) {
                    src = setInterval(function () {
                        top -= 10;
                        window.scrollTo(0, top);
                        if (top <= topvalue) {
                            clearInterval(src);
                            top = topvalue;
                        }
                    }, speed);
                } else {
                    console.log(top);
                    console.log(topvalue);
                    src = setInterval(function () {
                        top += 10;
                        window.scrollTo(0, top);
                        if (top >= topvalue) {
                            clearInterval(src);
                        }
                    }, speed);
                }
            });
        });
    })();

    function displayNone() {
        form.style.display = "none";
    }

    function showA() {
        var form = document.querySelector('.popup');
        console.log("ЙЙЙЙ");
        form.style.display = "block";
        ////form.style.opacity = 1;
        setTimeout(function () {
            form.classList.add('active');
            form.addEventListener('transitionend', displayNone);
        }, 0);
    };

    function hidenA() {
        var form = document.querySelector('.popup');
        form.classList.remove('active');
        setTimeout(function () {
            form.style.display = "none";
            form.removeEventListener('transitionend', displayNone(form));
        }, 0);
        // не получилось сделать адекватное плавное закрытие формы. 
    };

    (function () {
        var pop = document.getElementById('lowly'),
            form = document.querySelector('.popup'),
            b = false;
        pop.addEventListener('click', function (event) {
            event.preventDefault();
            console.log("DDDD");
            if (!b) {
                showA();
                b = true;
            }
        });
        document.querySelector('.popup_bg').addEventListener('click', function (event) {
            hidenA();
            b = false;
        });
    })();

    (function () {
        var menu = document.getElementById('menu'),
            text = document.querySelectorAll('.header .menu a');
        if (document.body.scrollTop >= 600) {
            menu.style.position = "fixed";
            for (var i = 0; i < text.length; i++) {
                text[i].style.color = "#17daa3";
            }
        } else {
            menu.style.position = "relative";
            for (var _i = 0; _i < text.length; _i++) {
                text[_i].style.color = "white";
            }
        }
    })();
})();